- name: Create AWS resources
  hosts: localhost
  connection: local
  gather_facts: False
  
  tasks:
    - name: Create an Bucket
      s3_bucket:
        name: jmtestpage4
        region: eu-central-1
    - name: Configure bucket as website
      s3_website :
        name: jmtestpage4
        region: eu-central-1
        error_key: index.html
        state: present
    - name: Create an empty bucket
      s3_sync:
        bucket: jmtestpage4
        file_root: ./target/
        mode: put
        metadata: 'Content-Encoding=gzip,Cache-Control=no-cache'
        permission: public-read
        cache_control: "public, max-age=31536000"
        file_change_strategy: checksum
        mode: push
        


